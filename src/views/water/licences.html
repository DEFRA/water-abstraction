{{> styles}}
<main id="content">
  {{>element-phase-tag}}
  <nav>
    <div class="breadcrumbs">
      <ol>
        <li><a href="/?access=PB01">Your service</a></li>
        <li><a href="/licences">Abstraction licences</a></li>
        {{>element-header-links}}
      </ol>
    </div>
  </nav>
<!--
  {{>element-heading-large content='Register a licence'}}
  Enter provided shortcode to register a new licence

  <a tabindex="-1">
    <div class="menubox" tabindex="0">
      <input id='shortcode' type='text'/> &nbsp;
      <button class='button button-start' onclick='sendShortcode()'>
      Register Licence
      </button>
    </div>
  </a>
-->
  {{>element-heading-large content='Your water abstraction licences'}}


  {{#if enableSearch}}
  <form method="GET" action="/licences" name="licenceSearch">

  <!-- Licence search form -->
  <div class="grid-row">
    {{#if showEmailFilter }}
    <div class="column-two-fifths">
      <div class="form-group form-group--horizontal">
        <label class="form-label form-label--bold" for="emailAddress">User email address</label>
        <span class="form-hint">View licence list by user account.</span>
        <input type="text" class="form-control form-control--block" name="emailAddress" id="emailAddress" value="{{ query.emailAddress }}" />
      </div>
    </div>
    {{/if}}

    <div class="column-two-fifths">
      <div class="form-group form-group--horizontal">
        <label class="form-label form-label--bold" for="licenceNumber">Search licences</label>
        <span class="form-hint">Search by licence name or number.</span>
        <input type="search" class="form-control form-control--block" name="licenceNumber" id="licenceNumber" value="{{ query.licenceNumber }}" />
      </div>
    </div>

    <div class="column-one-fifth">
      <input id="searchButton" class="button button button-license-search" type="submit" value="Search">
    </div>
  </div>
  <!-- End licence search form -->

  </form>
  {{/if}}


  <!-- Results page goes here -->
  <div class="license-results" id="results">

    <div class="license-results-header">
      <div class="license-results-header__column">
        <a href="/licences?{{{ sortQuery direction=direction sort=sort field="licenceNumber" licenceNumber=query.licenceNumber emailAddress=query.emailAddress }}}#results">Licence serial number
          {{{ sortIcon  direction=direction sort=sort field="licenceNumber" }}}
        </a>
      </div>
      <div class="license-results-header__column">
        <a href="/licences?{{{ sortQuery direction=direction sort=sort field="name" licenceNumber=query.licenceNumber emailAddress=query.emailAddress }}}#results">Licence name
          {{{ sortIcon  direction=direction sort=sort field="name" }}}
        </a>
      </div>
      <div class="license-results-header__column"></div>
    </div>

    {{^licenceData}}
    <!-- No results found -->
    <div class="license-result">
      <h2 class="heading-medium license-result__column">No licences found.</h2>
      <p class="license-result__column license-result__column--description"></p>
      <div class="license-result__column license-result__column--view" aria-hidden="true"></div>
    </div>
    {{/licenceData}}

    <!-- Display list of clickable licence rows/tiles -->
    {{#each licenceData}}
      {{#>element-licence-link this}}{{/element-licence-link}}
    {{/each}}

  </div>


  <p></p>

</main>

{{> footerjs}}


{{> debug}}

<script>
  function sendShortcode(){
    console.log($('#shortcode').val)
    document.location='/shortcode/'+$('#shortcode').val()
  }
</script>
